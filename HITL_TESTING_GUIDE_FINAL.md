# HITL 测试完整指南

## 📚 文档导航

### 快速开始（5 分钟）
👉 **`HITL_QUICK_TEST.md`**
- 最快的测试方式
- 适合快速验证功能

### 逐步测试（30 分钟）
👉 **`HITL_TESTING_STEP_BY_STEP.md`**
- 详细的步骤说明
- 包含调试技巧
- 适合完整验证

### 测试检查清单
👉 **`HITL_TESTING_CHECKLIST.md`**
- 60+ 个测试项目
- 系统化的验证
- 适合全面测试

### 演示脚本
👉 **`HITL_DEMO_SCRIPT.md`**
- 5 分钟演示脚本
- 适合展示功能
- 包含演示技巧

## 🚀 快速开始（选择一个）

### 方式 1: 最快验证（5 分钟）
```bash
# 1. 启动后端
cd ai-education-service
python -m uvicorn main:app --reload

# 2. 启动前端
cd 前端web
npm run dev

# 3. 打开浏览器
http://localhost:3000

# 4. 登录 → 进入对话 → 发送触发消息 → 看到模态框
```

### 方式 2: 完整测试（30 分钟）
按照 `HITL_TESTING_STEP_BY_STEP.md` 的步骤逐一执行

### 方式 3: 系统验证（1 小时）
使用 `HITL_TESTING_CHECKLIST.md` 的 60+ 个测试项目

## 🎯 测试目标

| 目标 | 验证方式 | 预期结果 |
|------|---------|---------|
| 中断检测 | 发送触发消息 | 看到模态框 |
| 模态框显示 | 观察 UI | 清晰显示操作信息 |
| 决策提交 | 点击按钮 | 决策被提交 |
| 恢复执行 | 观察日志 | AI 继续执行 |

## ✅ 成功标志

看到以下任何一个就说明成功：

```
✅ HITL 审批模态框显示
✅ 看到操作信息和决策按钮
✅ 决策提交后 AI 继续执行
✅ 控制台显示关键日志
```

## 🔍 关键日志

在浏览器控制台中查找：

```javascript
🤖 发送 AI 请求
🔗 保存 thread_id: thread_xxx
🛑 检测到 HITL 中断
📤 提交 HITL 决策
✅ 恢复执行完成
```

## 🐛 常见问题

### Q: 模态框不显示？
**A**: 
1. 检查消息是否触发了 memory_write
2. 查看控制台是否有错误
3. 刷新页面重试

### Q: 决策提交失败？
**A**:
1. 检查是否为所有操作做出决策
2. 查看网络请求是否成功
3. 检查后端日志

### Q: 恢复后没有响应？
**A**:
1. 检查 thread_id 是否正确
2. 查看 `/api/ai/chat/resume` 请求
3. 检查后端是否在运行

## 📊 测试结果记录

### 测试环境
- 操作系统: ___________
- 浏览器: ___________
- Node.js 版本: ___________
- Python 版本: ___________

### 测试结果
- [ ] 后端启动成功
- [ ] 前端启动成功
- [ ] 登录成功
- [ ] 进入对话页面成功
- [ ] 中断检测成功
- [ ] 模态框显示成功
- [ ] 决策提交成功
- [ ] 恢复执行成功

### 性能指标
- 中断检测延迟: _____ ms
- 模态框显示延迟: _____ ms
- 决策提交延迟: _____ ms
- 恢复执行延迟: _____ ms

### 问题记录
```
问题 1: _________________________________
解决方案: _________________________________

问题 2: _________________________________
解决方案: _________________________________
```

## 📞 获取帮助

### 文档资源
- `HITL_QUICK_START.md` - 快速开始
- `HITL_INTEGRATION_GUIDE.md` - 集成指南
- `HITL_IMPLEMENTATION_CHECKLIST.md` - 实现检查清单

### 代码文件
- `前端web/lib/hitl-utils.ts` - 工具函数
- `前端web/hooks/useHITL.ts` - Hook
- `前端web/components/modals/HITLApprovalModal.tsx` - 组件

### 日志位置
- 浏览器控制台: F12 → Console
- 网络请求: F12 → Network
- 后端日志: 终端输出

## 🎊 测试完成

当所有测试通过后：

1. ✅ 记录测试结果
2. ✅ 保存截图/视频
3. ✅ 生成测试报告
4. ✅ 提交给团队

---

**选择上面的任何一个文档开始测试！** 🚀

