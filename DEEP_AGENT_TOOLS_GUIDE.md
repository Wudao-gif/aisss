# Deep Agent 工具使用指南

## 概述

Deep Agent 是一个功能强大的 AI 教育辅导助手，采用**先规划，后执行**的工作方式。

### 核心特点
- ⭐ **不直接给出答案** - 先进行任务规划和分解
- ⭐ **主动询问信息** - 了解用户的学习目标和背景
- ⭐ **制定详细计划** - 使用 `write_todos` 分解任务
- ⭐ **逐步执行** - 按计划逐个完成子任务

## 内置工具

### 1. 记忆管理工具

#### memory_read
- **功能**：读取用户的学习记忆
- **参数**：
  - `user_id`: 用户ID
  - `query`: 搜索查询
  - `memory_type`: 可选，筛选类型（profile/understanding/learning_track）
- **使用场景**：
  - 了解用户的学习背景
  - 查询用户对某个知识点的理解程度
  - 获取用户的学习历史

#### memory_write
- **功能**：保存学习信息到用户记忆库
- **参数**：
  - `user_id`: 用户ID
  - `memory_text`: 记忆内容
  - `memory_type`: 记忆类型（profile/understanding/learning_track）
  - `textbook_id`: 可选，教材ID
- **使用场景**：
  - 记录用户的学习风格和目标
  - 保存用户对知识点的理解程度
  - 记录学习进度和成果

### 2. 任务规划工具

#### write_todos
- **功能**：创建和管理任务清单，用于复杂学习任务的分解和规划
- **特点**：
  - 支持多层级任务结构（主任务 + 子任务）
  - 自动跟踪任务进度
  - 提供清晰的任务分解视图
- **使用场景**：
  - 用户要求"制定高等数学学习计划"
  - 用户要求"分解这个复杂问题的解题步骤"
  - 用户要求"规划复习计划"
  - 用户要求"制定学期学习目标"

### 3. 文件系统工具

#### write_file
- **功能**：创建新文件
- **使用场景**：生成学习笔记、总结文档、学习资料

#### edit_file
- **功能**：编辑现有文件
- **使用场景**：更新学习笔记、修改学习计划

#### read_file
- **功能**：读取文件内容
- **使用场景**：查看之前生成的学习资料

#### ls
- **功能**：列出文件系统中的文件
- **使用场景**：查看已生成的学习资料列表

### 4. 子代理工具

#### task
- **功能**：为特定任务生成专业子代理
- **使用场景**：
  - 复杂的数学计算
  - 深度的概念分析
  - 专业的问题解答

## 工作流程

```
用户提问（如："你好" 或 "什么是极限？"）
   ↓
1️⃣ 意图澄清 - 理解用户的真实需求
   ↓
2️⃣ 信息收集 - 询问必要的背景信息
   - 学习目标是什么？
   - 当前水平如何？
   - 需要什么形式的帮助？
   ↓
3️⃣ 读取学习记忆 (memory_read)
   ↓
4️⃣ 任务规划 (write_todos) ⭐ 关键步骤
   - 制定详细的学习计划
   - 分解为多个子任务
   - 即使简单问题也要分解
   ↓
5️⃣ 逐步执行 - 按计划完成每个子任务
   ↓
6️⃣ 保存学习信息 (memory_write)
   ↓
返回结果
```

## 使用示例

### 示例1：简单问候
**用户**："你好"

**Deep Agent 的行动**：
1. ❓ 询问用户："你好！我是你的学习助手。请告诉我：
   - 你想学习什么内容？
   - 你的学习目标是什么？
   - 你目前的水平如何？"
2. 等待用户回答
3. 根据回答使用 `write_todos` 制定学习计划
4. 按计划逐步执行

### 示例2：简单问题
**用户**："什么是极限？"

**Deep Agent 的行动**：
1. ❓ 先询问："我来帮你理解极限。请告诉我：
   - 你是初学者还是有基础？
   - 你想要深入理解还是快速了解？
   - 你需要例子和练习吗？"
2. 使用 `write_todos` 创建计划：
   ```
   主任务：理解极限概念
   ├─ 子任务1：学习极限的定义
   ├─ 子任务2：理解极限的性质
   ├─ 子任务3：学习极限的计算方法
   └─ 子任务4：做练习题
   ```
3. 按计划逐步讲解和练习
4. 使用 `memory_write` 记录用户的理解程度

### 示例3：复杂问题
**用户**："怎样求解这个微分方程？"

**Deep Agent 的行动**：
1. ❓ 询问："我来帮你解决这个微分方程。请告诉我：
   - 这是什么类型的微分方程？
   - 你已经学过哪些解法？
   - 你想要详细步骤还是思路指导？"
2. 使用 `write_todos` 分解解题步骤
3. 逐步执行每个子任务
4. 使用 `memory_write` 记录学习成果

## 最佳实践

1. **主动规划**：对于复杂任务，主动使用 `write_todos` 进行规划
2. **记忆管理**：在对话开始时读取记忆，结束时保存重要信息
3. **个性化教学**：根据用户记忆调整教学方式
4. **清晰表达**：使用文件系统工具生成结构化的学习资料

