# HITL 快速测试 - 5 分钟版本

## ⚡ 快速开始

### 1️⃣ 启动后端（终端 1）
```bash
cd ai-education-service
python -m uvicorn main:app --reload --port 8000
```

等待看到：
```
Uvicorn running on http://127.0.0.1:8000
```

### 2️⃣ 启动前端（终端 2）
```bash
cd 前端web
npm run dev
```

等待看到：
```
▲ Next.js 14.x.x
- Local: http://localhost:3000
```

### 3️⃣ 打开浏览器
```
http://localhost:3000
```

## 🧪 测试流程（5 分钟）

### 第 1 分钟：登录
1. 输入测试账户
2. 点击登录
3. 等待加载

### 第 2 分钟：进入对话
1. 选择一本书
2. 点击进入对话
3. 等待页面加载

### 第 3 分钟：打开开发者工具
1. 按 `F12`
2. 切换到"控制台"
3. 清空日志（可选）

### 第 4 分钟：发送触发消息
在对话框输入：
```
保存我的学习笔记：今天学习了 HITL 功能
```

然后按 Enter 发送

**观察**:
- 看到"正在输入..."
- 控制台显示日志
- **关键**: 看到 HITL 审批模态框弹出

### 第 5 分钟：测试决策
1. 点击"批准"按钮（✓）
2. 点击"提交决策"
3. 观察 AI 继续执行

## ✅ 成功标志

看到以下任何一个就说明成功：

```
✅ HITL 审批模态框显示
✅ 看到操作信息
✅ 看到决策按钮
✅ 决策提交后 AI 继续执行
```

## 🔍 关键日志

在控制台中查找这些日志：

```javascript
// 发送请求
🤖 发送 AI 请求: {...}

// 获取 thread_id
🔗 保存 thread_id: thread_xxx

// 检测中断
🛑 检测到 HITL 中断，显示审批模态框

// 提交决策
📤 提交 HITL 决策: [...]

// 恢复完成
✅ 恢复执行完成
```

## 🐛 快速排查

### 模态框不显示？
```javascript
// 在控制台输入
console.log('HITL State:', hitlState)
```

### 没有看到日志？
1. 刷新页面（Ctrl+R）
2. 清空控制台
3. 重新发送消息

### 后端没有响应？
```bash
# 检查后端是否运行
curl http://localhost:8000/docs
```

## 📊 测试结果

| 项目 | 状态 |
|------|------|
| 后端启动 | ✅ |
| 前端启动 | ✅ |
| 登录成功 | ✅ |
| 进入对话 | ✅ |
| 中断检测 | ✅ |
| 模态框显示 | ✅ |
| 决策提交 | ✅ |
| 恢复执行 | ✅ |

## 🎯 下一步

如果测试成功：
1. 尝试拒绝决策
2. 尝试编辑参数
3. 查看完整的测试指南

如果测试失败：
1. 查看 `HITL_TESTING_STEP_BY_STEP.md`
2. 查看常见问题部分
3. 检查日志和网络请求

---

**5 分钟快速测试完成！** ⏱️

